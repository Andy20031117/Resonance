/* 基本與全螢幕 */
html, body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #000;
}
.game-section {
  position: relative;
  width: 100vw;
  height: 100vh;
  background: url("Gbg.png") no-repeat center center;
  background-size: cover;
}

/* 平台：20vh */
.game-platform {
  position: absolute;
  bottom: 10vh;
  left: 0;
  width: 100%;
  height: 10vh;
  background: linear-gradient(to top, rgba(20,20,20,0.7), rgba(20,20,20,0.4));
  border-top: 2px solid rgba(255,255,255,0.6);
  z-index: 5;
}

/* 玩家 */
.player {
  position: absolute;
  left: 8vw;
  bottom: 20vh; /* 對齊平台上緣（跳躍時由 JS 疊加） */
  width: 6vw;
  min-width: 54px;
  height: auto;
  z-index: 20;
  transition: filter 0.1s ease;
}

/* 物件容器 */
#obstacle-container,
#fragment-container {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
#obstacle-container { z-index: 15; }
#fragment-container { z-index: 12; }

/* 障礙物 */
.obstacle {
  position: absolute;
  bottom: 20vh;
  width: 64px;
  height: 64px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}
.obstacle img {
  width: 64px;
  height: auto;
  display: block;
}

/* 碎片 */
.fragment {
  position: absolute;
  bottom: 20vh;
  width: 42px;
  height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,0.6));
}
.fragment img {
  width: 42px;
  height: 42px;
  object-fit: contain;
  display: block;
}

/* HUD */
.hud {
  position: absolute;
  inset: 0;
  z-index: 30;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto;
  color: #fff;
  text-shadow: 0 2px 6px rgba(0,0,0,0.6);
  font-weight: 700;
  pointer-events: none;
}
.hud-left, .hud-right {
  position: absolute;
  top: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
}
.hud-left { left: 16px; }
.hud-right { right: 16px; }

.lives {
  display: flex;
  gap: 8px;
}
.lives .heart {
  width: 20px; height: 20px;
  background: #ff4d6d;
  clip-path: path("M10 18 C 4 12, 0 9, 0 5 C 0 2, 2 0, 5 0 C 7 0, 9 1, 10 3 C 11 1, 13 0, 15 0 C 18 0, 20 2, 20 5 C 20 9, 16 12, 10 18 Z");
  opacity: 1;
}
.lives .heart.lost { opacity: 0.25; }

.distance {
  font-size: 22px;
  letter-spacing: 2px;
  font-variant-numeric: tabular-nums;
  min-width: 110px;
  text-align: right;
}

/* 碎片 HUD */
.frags {
  display: flex;
  gap: 6px;
  align-items: center;
}
.frag-slot {
  width: 22px; height: 22px;
  border: 2px solid rgba(255,255,255,0.7);
  border-radius: 4px;
  display: grid;
  place-items: center;
  font-size: 12px;
  opacity: 0.7;
}
.frag-slot.filled {
  background: rgba(0, 255, 170, 0.85);
  border-color: rgba(0, 255, 170, 1);
  color: #032;
  opacity: 1;
}

/* 技能膠囊 */
.skill-pill {
  pointer-events: none;
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.3);
  font-size: 14px;
}
.skill-pill.ready {
  background: rgba(0, 255, 170, 0.15);
  border-color: rgba(0, 255, 170, 0.6);
}

/* 技能效果：無敵光暈 / 磁吸環 / 減速世界 */
.player.invincible {
  filter: drop-shadow(0 0 10px #00ffaa) drop-shadow(0 0 20px #00ffaa);
  animation: inviblink 0.3s linear infinite alternate;
}
@keyframes inviblink {
  0% { filter: drop-shadow(0 0 6px #00ffaa) drop-shadow(0 0 12px #00ffaa);}
  100% { filter: drop-shadow(0 0 12px #00ffaa) drop-shadow(0 0 24px #00ffaa);}
}
.player.magnet::after {
  content: "";
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  width: 180px; height: 180px;
  border: 2px dashed rgba(0, 255, 255, 0.7);
  border-radius: 999px;
  pointer-events: none;
}
.game-section.slow-world::after {
  content: "";
  position: absolute;
  inset: 0;
  backdrop-filter: blur(1px);
  background: rgba(0, 60, 120, 0.06);
  pointer-events: none;
  z-index: 25;
}

/* 距離數字的「跳動」動畫（瞬移時套用） */
.distance.bump {
  animation: distbump 0.6s ease;
}
@keyframes distbump {
  0%   { transform: scale(1);   filter: drop-shadow(0 0 0 rgba(0,255,170,0)); }
  15%  { transform: scale(1.25); filter: drop-shadow(0 0 10px rgba(0,255,170,0.8)); }
  100% { transform: scale(1);   filter: drop-shadow(0 0 0 rgba(0,255,170,0)); }
}

/* 亂序瞬移：玩家時空扭曲（短暫） */
.player.teleporting {
  animation: tpwarp 0.6s ease;
  filter: hue-rotate(40deg) saturate(1.4) brightness(1.1);
}
@keyframes tpwarp {
  0%   { transform: translateY(-6px) scale(0.95); opacity: 0.8; }
  50%  { transform: translateY(0)    scale(1.06); opacity: 1; }
  100% { transform: translateY(0)    scale(1.0);  opacity: 1; }
}
